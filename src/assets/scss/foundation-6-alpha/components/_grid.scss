/*
	THE GRID
*/

/*
	Frames are containers that stretch to the full dimmensions of the browser window.
*/
.frame {
	margin: 0;
	height: 100vh;
	display: flex;
	flex-flow: row nowrap; 
	overflow: hidden;
	position: relative;

	&.vertical, &.small-vertical { 
		flex-flow: column nowrap; 
	}

	&.horizontal, &.small-horizontal { 
		flex-flow: row nowrap;
	}
	
	@media #{$medium-up} {
		&.medium-vertical { flex-flow: column nowrap; }
		&.medium-horizontal { flex-flow: row nowrap; }
	}
	@media #{$large-up} {
		&.large-vertical { flex-flow: column nowrap; }
		&.large-horizontal { flex-flow: row nowrap; }
	}
}
// Containers imitate the sizing of old Foundation rows.
.container {
	max-width: 1000px;
	margin: 0 auto;
}

// These classes allow you to reorder content based on screen size.
.block, .group {
	transition: all 300ms ease;
	backface-visibility: hidden;
}

/*
	Groups are collections of content items. They're the "rows" of Foundation for Apps.
*/
.group {
	flex: 1 1 auto;
	position: relative;
	display: flex;
	flex-flow: row wrap;
	padding: 0;
	overflow: hidden;

	// Centering
	&.centered {
		margin-left: auto;
		margin-right: auto;
	}

	// Vertical grids
	&.vertical, &.small-vertical { flex-flow: column wrap; height: 100%; 
		&.scrollable, &.small-scrollable { overflow-y: scroll; flex-flow: column nowrap; }
		&.scrollable-vertical, &.small-scrollable-vertical { overflow-x: scroll; flex-flow: column wrap; }
	}
	@media #{$medium-up} {
		&.medium-vertical { flex-flow: column nowrap; }
		&.medium-horizontal { flex-flow: row nowrap; height: auto; }
	}
	@media #{$large-up} {
		&.large-vertical { flex-flow: column nowrap; }
		&.large-horizontal { flex-flow: row nowrap; height: auto; }
	}

	// Scrollable grids
	&.scrollable { overflow-x: scroll; flex-flow: row nowrap; -webkit-overflow-scrolling: touch; }
	&.scrollable-vertical { overflow-y: scroll; flex-flow: row wrap; height: 100%; -webkit-overflow-scrolling: touch; 
		&>.block:not([class*="small-"]) { flex-basis: 100%; }
	}
	@media #{$medium-up} {
		&.medium-scrollable { overflow-x: scroll; flex-flow: row nowrap; }
		&.medium-scrollable-vertical { overflow-y: scroll; flex-flow: row wrap; height: 100%; 
			&>.block:not([class*="small-"]) { flex-basis: 100%; }
		}

		&.medium-vertical { flex-flow: column wrap; height: 100%; 
			&.scrollable { overflow-y: scroll; flex-flow: column nowrap; }
			&.scrollable-vertical { overflow-x: scroll; flex-flow: column wrap; }
		}
	}
	@media #{$large-up} {
		&.large-scrollable { overflow-x: scroll; flex-flow: row nowrap; }
		&.large-scrollable-vertical { overflow-y: scroll; flex-flow: row wrap; height: 100%; 
			&>.block:not([class*="small-"]) { flex-basis: 100%; }
		}

		&.large-vertical { flex-flow: column wrap; height: 100%; 
			&.scrollable { overflow-y: scroll; flex-flow: column nowrap; }
			&.scrollable-vertical { overflow-x: scroll; flex-flow: column wrap; }
		}
	}
}

/*
	Blocks are containers for actual content. They're the "columns" of Foundation for Apps.
*/
@mixin block {
	flex: 1 1 auto;
	padding: 1rem;
	position: relative;
	top: auto;
	right: auto;
	bottom: auto;
	left: auto;
	overflow: hidden;

	// I am a bad person
	transform: none !important;
	width: auto !important;
	height: auto !important;
	z-index: auto !important;
	box-shadow: none !important;

	&.scrollable {
		overflow: scroll;
	}
  &.collapse, .group.collapse > & {
  	padding: 0;
  }
}

/*
	Vertical classes for groups and frames
*/
.vertical, .small-vertical, .medium-vertical, .large-vertical {
	.block { height: auto; }

	@for $i from 0 through $total-columns {
	  &>.small-#{$i} {
	    height: percentage($i / $total-columns);
	  }
	}

	@media #{$medium-up} {
    @for $i from 0 through $total-columns {
		  &>.medium-#{$i} {
		    height: percentage($i / $total-columns);
		  }
		}
  }

  @media #{$large-up} {
    @for $i from 0 through $total-columns {
		  &>.large-#{$i} {
		    height: percentage($i / $total-columns);
		  }
		}
  }
}

img { max-width: 100%; }

/*
	Off-canvas panels
*/
@mixin panel-base($direction: left, $speed: 0.25s) {
	display: block;
	position: absolute;
	transition: transform $speed linear;
	z-index: 100;
	overflow-y: scroll;

	// Box shadows
	$shadow-distance: 3px;
	$shadow-size: 10px;
	$shadow-color: rgba(black, 0.25);

	&.is-active {
		@if $direction == left   { box-shadow: $shadow-distance 0 $shadow-size $shadow-color; }
		@if $direction == right  { box-shadow: -$shadow-distance 0 $shadow-size $shadow-color; }
		@if $direction == top    { box-shadow: 0 $shadow-distance $shadow-size $shadow-color; }
		@if $direction == bottom { box-shadow: 0 -$shadow-distance $shadow-size $shadow-color; }
	}
}
@mixin panel-position($direction: left, $size: 300px) {
	@if $direction == left {
		top: 0;
		left: 0;
		height: 100%;
		transform: translateX(-100%);

		&.is-active {
			transform: translateX(0%);
		}
	}
	@else if $direction == top {
		top: 0;
		left: 0;
		width: 100%;
		transform: translateY(-100%);

		&.is-active {
			transform: translateY(0%);
		}
	}

	@if $direction == left or $direction == right {
		width: 100%;
		@media screen and (min-width: rem-calc($size)) {
			width: $size;
		}
	}
	@if $direction == top or $direction == bottom {
		height: 100%;
		@media screen and (min-height: rem-calc($size)) {
			height: $size;
		}
	}
}
@mixin panel($direction: left, $speed: 0.25s, $size: 300px) {
	@include panel-base($direction, $speed);
	@include panel-position($direction, $size);
}

/*
	CSS output
*/

.panel {
	@include panel-base;

	&-top {
		@include panel-position(top);
	}
	&-right {
		@include panel-position(right);
	}
	&-bottom {
		@include panel-position(bottom);
	}
	&-left {
		@include panel-position(left);
	}
}
.small-panel {
	@include panel-base;
}
@media #{$medium-up} {
	.medium-panel {
		@include panel;
	}
}
@media #{$large-up} {
	.large-panel {
		@include panel;
	}
}

// Blocks
.block, .small-block {
	@include block;
}
@media #{$medium-up} {
	.medium-block {
		@include block;
	}
}
@media #{$large-up} {
	.large-block {
		@include block;
	}
}

// Sizing and ordering classes
@for $i from 0 through $total-columns {
  .small-#{$i} {
    flex: 0 0 auto;
    flex-basis: percentage($i / $total-columns);
  }
  .small-order-#{$i} {
    order: $i;
  }
}
@media #{$medium-up} {
  @for $i from 0 through $total-columns {
	  .medium-#{$i} {
	    flex: 0 0 auto;
	    flex-basis: percentage($i / $total-columns);
	  }
	  .medium-order-#{$i} {
	    order: $i;
	  }
	}
}
@media #{$large-up} {
  @for $i from 0 through $total-columns {
	  .large-#{$i} {
	    flex: 0 0 auto;
	    flex-basis: percentage($i / $total-columns);
	  }
	  .large-order-#{$i} {
	    order: $i;
	  }
	}
}