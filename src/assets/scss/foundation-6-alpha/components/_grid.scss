@import "panels";

/*
	THE GRID
*/

body {
	// overflow: hidden;
}

/*
	Frames are containers that stretch to the full dimmensions of the browser window.
*/
.frame {
	display: flex;
	height: 100vh;
	margin: 0;
	padding: 0;
	position: relative;
	flex-flow: row wrap;
	overflow: hidden;

	// Orientation classes
	&.vertical, &.small-vertical {
		flex-flow: column nowrap;
		align-items: stretch;
	}
	@media #{$medium-up} {
		&.medium-horizontal {
			flex-flow: row wrap;
			align-items: flex-start;
		}
		&.medium-vertical {
			flex-flow: column nowrap;
			align-items: stretch;
		}
	}
	@media #{$large-up} {
		&.medium-horizontal {
			flex-flow: row wrap;
			align-items: flex-start;
		}
		&.large-vertical {
			flex-flow: column nowrap;
			align-items: stretch;
		}
	}

	// Block alignment
	&.align-right {
		justify-content: flex-end;
	}
	&.align-center {
		justify-content: center;
	}
	&.align-justify {
		justify-content: space-between;
	}
	&.align-spaced {
		justify-content: space-around;
	}

	// Stretch children along cross-axis
	&.stretch {
		align-items: stretch;
	}
}

/*
	Groups are collections of content items. They're the "rows" of Foundation for Apps.
*/
.group {
	@extend .frame;
	height: auto;
	flex: 1 1 auto;
	align-items: flex-start;

	// Containers imitate the sizing of old Foundation rows.
	&.container {
		max-width: 1200px;
		margin: 0 auto;
	}

	// Collapse margins when a group is not the direct child of a block
	&.nested {
		margin-left: -1rem;
		margin-right: -1rem;
	}
}

/*
	Blocks are containers for actual content. They're the "columns" of Foundation for Apps.
*/
@mixin block {
	flex: 1 1 auto;
	padding: 1rem;
	position: relative;
	top: auto;
	right: auto;
	bottom: auto;
	left: auto;
	overflow: hidden;

	// These properties reset the panel styles
	transform: none;
	width: auto;
	height: auto;
	z-index: auto;
	box-shadow: none;
	background: transparent;

	// Scrollable block
	&.scrollable {
		overflow: scroll;
		-webkit-overflow-scrolling: touch;
		-ms-overflow-style: -ms-autohiding-scrollbar;
	}

	// Collapse to remove padding
  &.collapse, .group.collapse > & {
  	padding: 0;
  }
}

// CSS output
.block {
	@include block;
}
@media #{$medium-up} {
	.medium-block {
		@include block;
	}
}
@media #{$large-up} {
	.large-block {
		@include block;
	}
}

// Sizing and ordering classes
@each $size, $breakpoint in ('small': $small-up, 'medium': $medium-up, 'large': $large-up) {
	@for $i from 0 through $total-columns {
		@media #{$breakpoint} {
			// Block sizing
			.#{$size}-#{$i} {
				flex: 0 0 percentage($i / $total-columns);
			}
			// Block ordering
			.#{$size}-order-#{$i} {
			  order: $i;
			}
		}
	}
}

/*
	Shared styles for groups and blocks
*/
.group, .block {
	// Shrink a flex item so it only takes up the space it needs
	&.shrink {
		flex: 0 0 auto;
	}

	// Offsets
	@each $size, $breakpoint in ('small': $small-up, 'medium': $medium-up, 'large': $large-up) {
		@for $i from 1 through 11 {
			&.#{$size}-offset-#{$i} {
				margin-left: percentage($i / 12);
				.vertical > &.#{$size}-offset-#{$i} {
					margin-left: 0;
					margin-top: percentage($i / 12);
				}
			}
		}
	}
}

// This prevents flicker when grid items shift around
.frame, .group, .block {
	transition: all 300ms ease;
	backface-visibility: hidden;
}